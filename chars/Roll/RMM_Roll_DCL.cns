; var(9) = Move around before match

[Data]
life = 900			;Amount of life to start with
attack = 90		;attack power (more is stronger)
defence = 90		;defensive power (more is stronger)
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 15		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 128			;Volume offset (negative for softer)
IntPersistIndex = 20	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables, 

[Size]
xscale = 1
yscale = 1
ground.back = 10
ground.front = 10
air.back = 8
air.front = 8
height = 45
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 5, -45
mid.pos = 3, -25
draw.offset=0,1 		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3
walk.back = -2.5
run.fwd  = 8.5,-2.4
run.back = -8.5,-2.3
jump.neu = 0,-9.2
jump.back = -3
jump.fwd = 3
runjump.back = -7,-10
runjump.fwd = 7,-10
airjump.neu = 0,-7.5
airjump.back = -4.5
airjump.fwd = 4.5

[Movement]
airjump.num = 0		;Number of air jumps allowed (opt)
airjump.height = 35	;Minimum distance from ground before you can air jump (opt)
yaccel = .49		;Vertical acceleration
stand.friction = .85	;Friction coefficient when standing
crouch.friction = .82	;Friction coefficient when crouching



;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,6
volume = 0
channel = 5

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 0, Narrator Wins]
type = PlaySnd
trigger1 = !time
value = S123,456

[State 180, winSGS]
type=changestate
trigger1=prevstateno=3305
value=3305

[State 0, ChangeState]
type = ChangeState
triggerall=matchover
trigger1 =prevstateno!=3305
value = 185

[State 0, ChangeState]
type = ChangeState
trigger1 =prevstateno!=3305
value = 181+(random%2)

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,11+random%2
volume = 0
channel = 5

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Match Win Pose
[Statedef 185]
type = S
ctrl = 0
;anim = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 300
flag = roundnotover
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim != 185
trigger1 = time = 10
value = S199,2
volume = 0
channel = -1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 185
trigger1 = time >= 190
value = 185

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 185
trigger1 = AnimElem = 4
value = S185,0+random%2
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 185
trigger1 = AnimElem = 16
value = S199,1
volume = 0
channel = -1

[State 0, VelSet]
type = VelSet
triggerall = anim = 185
trigger1 = AnimElemTime(16) >= 0
y = -15

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 185
value = 0
movecamera = 1,0
ignorehitpause = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 185
trigger1 = AnimElem = 1
value = S185,0+random%2
volume = 0
channel = -1


[State 0, PalFX]
type = PalFX
trigger1 = Time = 11
time = 3
add = 51, 51, 51

[State 0, PalFX]
type = PalFX
trigger1 = Time = 14
time = 4
add = 102, 102, 102

[State 0, PalFX]
type = PalFX
trigger1 = Time = 18
time = 3
add = 154, 154, 154

[State 0, PalFX]
type = PalFX
trigger1 = Time = 21
time = 3
add = 205, 205, 205

[State 0, PalFX]
type = PalFX
trigger1 = Time = 24
time = 6
add = 256, 256, 256

[State 0, PalFX]
type = PalFX
trigger1 = Time = 30
time = 3
add = 205, 205, 205

[State 0, PalFX]
type = PalFX
trigger1 = Time = 33
time = 4
add = 154, 154, 154

[State 0, PalFX]
type = PalFX
trigger1 = Time = 37
time = 3
add = 102, 102, 102

[State 0, PalFX]
type = PalFX
trigger1 = Time = 40
time = 4
add = 51, 51, 51

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, Life is Empty]
type = LifeSet
trigger1 = TeamSide = 2
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time && AiLevel
v = 35
value = 0+random%7



[State 190, 1]     ;This works ONLY when the Player is on Player 2 Side
type = null;ChangeState ;AND in Arcade, Player 2 is the Home Team side
trigger1 = ishometeam
trigger1 = TeamSide = 2
trigger2 = !ishometeam
trigger2 = TeamSide = 1
trigger2 = matchno=1
value = 194

[State 190, Willy]
type = ChangeState
trigger1 = Enemy,Name = "Doctor Wily" || Enemy,Name = "Wily RMM" || Enemy,Name = "Dr. Wily" || Enemy,Name = "Dr.Wily"  || Enemy,Name = "Wily"
value = 1900

[State 190, 1]
type = ChangeState
triggerall = teamside = 1
trigger1 = RoundState = 0
value = 191+random%2

[State 190, 1]
type = ChangeState
triggerall = teamside = 2
trigger1 = RoundState = 0
value = 196+(random%2)

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 22

;--------------------------
[Statedef 191]
type = S
physics = N
ctrl = 0
anim = 2500

[State 191, Explod]
type = Explod
trigger1 = time = 0
anim =2200
ID = 2200
pos = 0,675
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -2
scale = 1,.7
sprpriority = 5
ontop = 1
ownpal = 1
removeongethit = 0

[State 0191, PlaySnd]
type = PlaySnd
triggerall = anim = 2500
trigger1 = time = 29
value = S1000,0
channel = -1

[State 191, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 191, VelSet]
type = VelSet
trigger1 = anim = 2500
trigger1 = time = 15
x = 0
y = 15

[State 191, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 191, PosSet]
type = PosSet
trigger1 = time = 0
y = -600

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 2500
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 2501

[State 191, PalFXWiz]
type = PalFX
triggerall = Anim = 2501
trigger1 = AnimElemTime(1) = 0
time = 20
add = 100,100,180
mul = 256,256,256
sinadd = -80,-80,-80,20
invertall = 0
color = 0

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro
ignorehitpause = 1

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = anim=2500
flag = globalnoshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 2501
trigger1 = animelem = 2
value = S191,0+random%2
volume = 0
channel = 5


[State 192, 2]
type = ChangeState
triggerall = Anim = 2501
trigger1 = AnimTime = 0
value = 199

;--------------------------
; Intro 2
[Statedef 192]
type = S
physics = N
ctrl = 0
anim = 198

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S192,0+random%2
volume = 0
channel = 5

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro
ignorehitpause = 1

[State 192, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 199

;-----------------------------------------------
[Statedef 193]; Move around before match
type = S
physics =S
sprpriority = 0

[State 192,11]
type = ChangeState
trigger1 = !Time
value = 0
ctrl = 0

[State 190, Lifebar Sound]
type = PlaySnd
value = S11,3
trigger1 = TeamSide = 2
trigger1 = time = 0
channel = 5

[State -2, Stop Lifebar sound]
type = StopSnd
trigger1 = time = 110
channel = 5

[State 190, LifeBar]
type = LifeAdd
trigger1 = TeamSide = 2
trigger1 = Time < 260
value = 10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 193]
type = varset
trigger1 = time = 1
var(50) = 0

[State 193]
type = posset
trigger1 = 1
y = 0

[State 193]
type = VelSet
trigger1 = Time = 0
y = 0

[State 193, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 2.4

[State 193, 2]
type = VelSet
trigger1 = command = "holdback"
x = -2.0

[State 193]
type = ChangeAnim
trigger1 = command = "holdfwd"
trigger1 = Anim != 20
value = 20

[State 193]
type = ChangeAnim
trigger1 = command = "holdback"
trigger1 = Anim != 21
value = 21

[State 193]
type = ChangeAnim
trigger1 = command != "holdback"
trigger1 = command != "holdfwd"
trigger1 = Anim != 0
value = 0

[State 193, 2]
type = VelSet
trigger1 = command != "holdback"
trigger1 = command != "holdfwd"
x = 0

[State 193]
type = VarSet
trigger1 = roundstate != 2
var(9) = floor(pos x)

[State 193]
type = posset
trigger1 = roundstate = 2
trigger1 = var(9) != 0
x = var(9)

[State 193]
type = varset
trigger1 = roundstate = 2
var(9) = 0

[State F]
type = changestate
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command ="holdback"),20,0)

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
juggle = 1
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S195,0+random%2
volume = 0
channel = 5

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Introduction: Roland
[Statedef 196]
type = A
physics = N
ctrl = 0
anim = 191
velset = 0,0
sprpriority = 3

[State 196, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 196, Helper]
type = Helper
triggerall = numhelper(7650) = 0
trigger1 = anim = 191
helpertype = normal ;player
name = "Camera"
ID = 7650
stateno = 7650
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 191
value = 0
movecamera = 0,1

[State 0, Turn]
type = Turn
trigger1 = anim = 191
persistent = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = anim = 191
x = -320
y = -10
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim = 191
x = 5
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = anim = 191
value = 0

[State 0, Helper]
type = Helper
triggerall = numhelper(2000) = 0
trigger1 = anim = 191
helpertype = normal ;player
name = "Roland"
ID = 2000
stateno = 2000
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeAnim] ; Jumping Off
type = ChangeAnim
trigger1= (helper(7650),rootdist x<=0)
trigger1 = anim = 191 && anim != 43
value = 43

[State 0, PosSet]
type = PosSet
triggerall = anim = 43
trigger1= (helper(7650),rootdist x<=0)
x=ceil(helper(7650),pos x)

[State 0, VelAdd]
type = VelAdd
trigger1 = anim = 43
y = .49

[State 0, velset]
type=VelSet
trigger1= anim = 43
x=0
y=-2.5
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = anim = 43
persistent = 0

[State 0, ChangeAnim]; Landing
type = ChangeAnim
triggerall = anim != 47 && anim = 43
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 47

[State 0, 1]
type = VelSet
trigger1 = anim = 47
y = 0

[State 0, 2]
type = PosSet
trigger1 = anim = 47
y = 0

[State 0, Landing Sound]
type = PlaySnd
triggerall = random <= 600
trigger1 = anim = 47
value = s3,4
channel = 5
persistent = 0

[State 0, Landing Anim]
type = Explod
trigger1 = anim = 47
anim = 7503
ID = 8030
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -2
supermove = 9999
pausemove = 9999
scale = .6,.6
sprpriority = -1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause =1
persistent =0

[State 0, Landing Sound]
type = PlaySnd
trigger1 = anim = 47
value = s100,0
persistent = 0

[State 190, 4]
type = ChangeState
triggerall = anim = 47
trigger1 = animtime = 0
value = 199

;---------------------------------------------------------------------------
; Introduction beat
[Statedef 197]
type = A
ctrl = 0
anim = 192;+(random%2)
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, Helper]
type = Helper
triggerall = numhelper(7650) = 0
trigger1 = anim = 192
helpertype = normal ;player
name = "Camera"
ID = 7650
stateno = 7650
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 192
value = 0
movecamera = 0,1

[State 0, PosAdd]
type = PosAdd
trigger1 = anim = 192
x = -240
y = -40
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim = 192
x = 4
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = anim = 192
value = 0

[State 0, Hyper Voice]
type = PlaySnd
trigger1 = !time
value = S3201,0+random%2
volume = 0
channel = 0

[State 0, Helper]
type = Helper
triggerall = numhelper(2100) = 0
trigger1 = anim = 192
helpertype = normal ;player
name = "Buster"
ID = 2100
stateno = 2100
pos = 0,-55
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeAnim] ; Jumping Off
type = ChangeAnim
trigger1= (helper(7650),rootdist x>=0)
trigger1 = anim = 192 && anim != 193
value = 193

[State 0, PosSet]
type = PosSet
triggerall = anim = 193
trigger1= (helper(7650),rootdist x>=0)
x=ceil(helper(7650),pos x)

[State 0, VelAdd]
type = VelAdd
trigger1 = anim = 193
y = .49

[State 0, velset]
type=VelSet
trigger1= anim = 193
x=0
y=-3
persistent = 0

[State 0, ChangeAnim] ; Landing
type = ChangeAnim
triggerall = anim != 47 && anim = 193
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 47

[State 0, 1]
type = VelSet
trigger1 = anim = 47
y = 0

[State 0, 2]
type = PosSet
trigger1 = anim = 47
y = 0

[State 0, Landing Sound]
type = PlaySnd
triggerall = random <= 600
trigger1 = anim = 47
value = s3,4
channel = 5
persistent = 0

[State 0, Landing Anim]
type = Explod
trigger1 = anim = 47
anim = 7503
ID = 8030
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = 1
removetime = -2
supermove = 9999
pausemove = 9999
scale = .6,.6
sprpriority = -1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause =1
persistent =0

[State 0, Landing Sound]
type = PlaySnd
trigger1 = anim = 47
value = s100,0
persistent = 0

[State 190, 4]
type = ChangeState
triggerall = anim = 47
trigger1 = animtime = 0
value = 199

;-----------------------------------------------
; NEW Move around before match
[Statedef 199]
type = S
physics =S
sprpriority = 0
Anim = 0

[State 199, AssertSpecial]
type = AssertSpecial
trigger1 = life < lifemax
flag = intro

[State 190, Lifebar Sound]
type = PlaySnd
value = S11,3
trigger1 = TeamSide = 2
trigger1 = time = 0
channel = 5

[State -2, Stop Lifebar sound]
type = StopSnd
trigger1 = time = 90
channel = 5

[State 190, LifeBar]
type = LifeAdd
trigger1 = TeamSide = 2
trigger1 = Time < 260
value = 10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 193]
type = varset
trigger1 = time = 1
var(50) = 0

[State 193]
type = posset
trigger1 = 1
y = 0

[State 193]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = !time && AiLevel
v = 35
value = 0+random%7

;--------------------------
; Against Willy
[Statedef 1900]
type = S
physics = N
ctrl = 0
anim = 1900

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1900,0
volume = 0
channel = 5

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro
ignorehitpause = 1

[State 192, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 199



;---------------------------------------------------------------------------
;Tech Hitted
[Statedef 345]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,0			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 345				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=0
ctrl=1

;---------------------------------------------------------------------------
;Tech Hitted
[Statedef 346]
type    = A				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = A				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,-8			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 346				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=50
ctrl=1

;---------------------------------------------------------------------------
;Tech Hitted Low
[Statedef 347]
type    = C				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = C				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,0			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 347				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=11
ctrl=1
;---------------------------------------------------------------------------
; Throw P - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 800
p2facing = 1
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,5
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S4,20
volume = 0
channel = 5

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = s25081         ;No spark
sparkxy = 0,-50
hitsound = S4,0
p1facing = ifelse (command = "holdback", -1, 1)
p2facing = 1
animtype=Hard
p1stateno = 802;ifelse(var(35) = 1, 3401, 801)
p2stateno = 810;ifelse(var(35) = 1, 3407, 810)
fall.yvelocity = 0
guard.dist = 0
fall = 1
fall.recover = 0

[State 0, VarSet]
type = null;VarSet
trigger1 = AnimTime = 0
v = 35    ;fv = 10
value = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw K - Attempt
[Statedef 801]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 800
p2facing = 1
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,5
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S4,20
volume = 0
channel = 5

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = s25081         ;No spark
sparkxy = 0,-50
hitsound = S4,0
p1facing = ifelse (command = "holdback", -1, 1)
p2facing = 1
animtype=Hard
p1stateno = 820;
p2stateno = 825
fall.yvelocity = 0
guard.dist = 0
fall = 1
fall.recover = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; Throw - Girl Power!
[Statedef 802]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 802
sprpriority = 2

[State 0, Width]
type = Width
trigger1 = animelemtime(6) < 0
value = 20,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S3,2
volume = 0
channel = 5

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 13,-50

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 23,-64

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(3) = 0 ;&& AnimElemTime(2) < 0
pos = 43,0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 8012
ID = 8012
pos = 43,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 8013
ID = 8013
pos = 43,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S7002,0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------
[Statedef 810]
type = A
movetype = H
physics = N
sprpriority = 0

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

[State 925, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 925, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 810

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = -2
y = 12

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
y = 65

[State 0, LifeAdd]
type = LifeAdd
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = -80

[State 0, EnvShake]
type = EnvShake
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
time = 15
freq = 60

[State 926, 4]
type = SelfState
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; Throw K - Success
[Statedef 820]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 820
sprpriority = -1

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 40,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = Normal ;Player
name = "Apple bomb"
ID = 821
stateno = 821
pos = 10,-40
postype = P2    ;P2, Front, Back, Left, Right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -6
y = 0

[State 40, NEW DUST JUMP LAND]
type = Explod
trigger1 = Time%6=0 && Vel X !=0
anim = 25007
sprpriority = 5
Ownpal = 1


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
physics = S

[state 1107, flame]
type = explod
triggerall = NumTarget
trigger1 = AnimElem = 14
anim = 7512
id = 7512
pos = 0,0
postype = p2
removetime = -2
sprpriority = 10
bindtime = 1
ownpal = 1
ignorehitpause = 1

[state 1107, flame]
type = explod
triggerall = NumTarget
trigger1 = numexplod(8020) = 0
trigger1 = AnimElem = 14
anim = 8020
id = 8020
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y))
postype = p2
removetime = -2
sprpriority = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 14
time = 15
ampl = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14
value = S5,14


[State 0, TargetState]
type = TargetState
trigger1 = AnimElem = 14
value = 826


[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Apple helper
[Statedef 821]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 821
sprpriority = 10

[State 0, Gravity]
type = Gravity
trigger1 = Pos Y < 0

[State 0, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 20
time = 30
add = 200,80,-250
mul = 256,256,256
sinadd = 29,200,200,4
invertall = 0
color = 256

[state 1107, flame]
type = explod
trigger1 = Time = 120
anim = 7512
id = 7512
pos = 0,0
postype = p2
removetime = -2
sprpriority = 10
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 120
time = 15
ampl = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 120
value = S5,14


[State 0, DestroySelf]
type = DestroySelf
trigger1 = Root, Stateno = 820 && Root, AnimElem = 14
trigger2 = Time = 120


;-------------------------------------------
; Custom P2 K
[Statedef 825]
type = A
movetype = H
physics = N
sprpriority = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 825

[State 820, 2]
type = SelfState
trigger1 = time > 120
value = 5050

;------------------------------------------------------
;P2 custom end
[Statedef 826]
type    = A
movetype= H
physics = N
velset = -8,-10
Anim = 5050

[State 816, VelAdd]
type = veladd
trigger1 = Time >= 1
Y = 0.3

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 45
color = 0
add = 240,128,0
sinadd = 48,50,32,16
invertall = 0


[State 816, SelfState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
ctrl = 0

;---------------------------------------------------------------------------
; Throw Forward (Air) - Girl Power!!
[Statedef 850]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 850
p2facing = 1
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,5
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S4,20
volume = 0
channel = 5

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
hitflag = AF
priority = 1, Miss
sparkno = s25081         ;No spark
sparkxy = 0,-50
hitsound = S4,0
sprpriority = 1
p1facing = ifelse (command = "holdback", -1, 1)
p2facing = 1
animtype=Hard
p1stateno = 851
p2stateno = 860
fall.yvelocity = 0
guard.dist = 0
fall = 1
fall.recover = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElemTime(7) >= 0
value = 1
;---------------------------------------------------------------------------
; Throw - Girl Power!
[Statedef 851]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 851
sprpriority = 2

[State 0, Width]
type = Width
trigger1 = animelemtime(6) < 0
value = 20,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S3,2
volume = 0
channel = 5

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElem=1
pos = 13,-60

[State 0, TargetBind2]
type = TargetBind
trigger1 = AnimElem=2
pos = 48,-65

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(6) = 0
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElemTime(7) = 0
value = 1
;-------------------------------------------
[Statedef 860]
type = A
movetype = H
physics = N
sprpriority = 0

[State 3400, Tech Hit!]
type = null;SelfState
trigger1 = alive
trigger1 = time = [1,9]
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210

[State 925, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 925, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 860

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = -2
y = 12

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) >= 0
y = .49

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
y = 65

[State 0, LifeAdd]
type = LifeAdd
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = -80

[State 0, EnvShake]
type = EnvShake
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
time = 15
freq = 60

[State 926, 4]
type = SelfState
triggerall = AnimElemTime(3) >= 0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 5100
;---------------------------------------------------------------------------
; roll recovery
[Statedef 900]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = N				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 900				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 1			;Set layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,4
volume = 0
channel = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x =7.5
y = 0
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
;trigger2 = FrontEdgeBodyDist <= 10
value = 130;11
ctrl = 1
;---------------------------------------------------------------------------
; roll recovery
[Statedef 901]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = N				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 901				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 1		;Set layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,4
volume = 0
channel = -1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x =-7.5
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
;trigger2 = backEdgeBodyDist <= 10
value = 130;11
ctrl = 1

;---------------------------------------------------------------------------
; Stand Dodge
[Statedef 700]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 700				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = -1			;Set layering priority to 2 (in front)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT

[State 0, PlaySnd]
type = null;PlaySnd
trigger1 = AnimElem = 2
value = S3,2
volume = 0
channel = 5

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Forward Dodge
[Statedef 701]
type    = C				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = C				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 701				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = -1			;Set layering priority to 2 (in front)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(3)>=0 && animelemtime(8)<0
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3)>=0 && animelemtime(7)<0
x = 6

[State 0, HitBy]
type = HitBy
trigger1 = animelemtime(3)>=0 && animelemtime(8)<0
value = SCA,AT

[State 700, AfterImage]
type = Afterimage
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 5
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 100, New Dash start fx]
type = Explod
trigger1 = !time
ID = 6088
anim = 6088
postype = p1
pos = 10,0
bindtime = 1
removetime = -2
vel = 0, 0
ownpal = 1
sprpriority = 5
removeongethit = 0

[State 0, Dust Explod]
type = Explod
triggerall = Vel X !=0
trigger1 = Time %4=0
anim = 25007
pos = -25,0
postype = P1  ;P2, Front, Back, Left, Right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,6
volume = 0
channel = -1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Backward Dodge
[Statedef 702]
type    = C				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = C				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 702				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = -1			;Set layering priority to 2 (in front)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(3)>=0 && animelemtime(8)<0
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3)>=0 && animelemtime(7)<0
x = -6

[State 0, HitBy]
type = HitBy
trigger1 = animelemtime(3)>=0 && animelemtime(8)<0
value = SCA,AT

[State 700, AfterImage]
type = Afterimage
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 5
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 100, New Dash start fx]
type = Explod
trigger1 = !time
ID = 6088
anim = 6088
postype = p1
pos = 10,0
bindtime = 1
removetime = -2
vel = 0, 0
ownpal = 1
sprpriority = 5
removeongethit = 0
facing = -1

[State 0, Dust Explod back]
type = Explod
triggerall = Vel X !=0
trigger1 = Time %4=0
anim = 25007
pos = 25,0
postype = P1  ;P2, Front, Back, Left, Right
facing = 1
vfacing = 1
bindtime = 1
sprpriority = 5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,6
volume = 0
channel = -1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; roll recovery Dodge
[Statedef 703]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = N				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 703				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 1			;Set layering priority to 2 (in front)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 4
y = 0
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = FrontEdgeBodyDist <= 10
value = 11
ctrl = 1

;---------<PARRY>----------
;---STANDING---
[Statedef 790]
type=S
physics=S
movetype=I
anim=165
velset=0,0
ctrl=0
sprpriority=2
poweradd=100

[State 700, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 700, stop]
type=posfreeze
trigger1=1
value=1

[State 700, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 700, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 700, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=45,-63
pausemovetime=60
ownpal=1
scale=.5,.5

[State 700, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 700, end]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---CROUCHING---
[Statedef 791]
type=C
physics=C
movetype=I
anim=166
velset=0,0
ctrl=0
sprpriority=2
poweradd=100

[State 701, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 701, stop]
type=posfreeze
trigger1=1
value=1

[State 701, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 701, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 701, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=25,-22
pausemovetime=60
ownpal=1
scale=.5,.5

[State 701, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 701, end]
type=changestate
trigger1= !animtime
value=11
ctrl=1


;---AERIAL---
[Statedef 792]
type=A
physics=A
movetype=I
anim=167
ctrl=0
sprpriority=2
poweradd=100

[State 702, hb]
type=hitby
trigger1=time<15
value=SCA,AT
time=1

[State 702, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 702, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 702, sts]
type=statetypeset
trigger1= time<15
physics=N

[State 702, stop]
type=posfreeze
trigger1= time<15
value=1

[State 702, vel]
type=velset
trigger1= time=15
x=ifelse(vel x>2,2,ifelse(vel x<-2,-2,vel x))
y=ifelse(vel y<-2,vel y,-2)

[State 702, sts]
type=statetypeset
trigger1= time>=15
physics=A

[State 702, ctrl]
type=ctrlset
trigger1= time>=15
value=1

[State 702, blueflash]
type=palfx
trigger1= !time
add=0,64,255
sinadd=0,-64,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=45,-80
pausemovetime=60
ownpal=1
scale=.5,.5

[State 702, asserts]
type=assertspecial
trigger1= 1
flag=noairguard

[State 702, ctrl]
type=ctrlset
trigger1= time>10
value=1

;==========<ZERO COUNTER>==========
[Statedef 750]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 750, strengthvar]
type=varset
trigger1=!time&&var(59)<=0
var(10)=ifelse((command="bdx"||command="bdy"||command="bdz"),1,2)
ignorehitpause=1

[State 750, strengthvar (AI)]
type=varset
trigger1=!time&&var(59)=1
var(10)=1
ignorehitpause=1

[State 750, snd]
type=playsnd
trigger1=time = 0
value=2,3
channel=0

[State 750, superpause]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s-1,0
p2defmul=1
darken=0

[State 3000, carga]
type=helper
trigger1=time = 0
helpertype=normal
stateno=9750
ID=9750
name="fx"
postype=p1
pos = 15,-45
ownpal=1
persistent=0
supermovetime=9999

[State 750, end]
type=changestate
trigger1=time>=20
value=ifelse(var(10)=1,1002,450)

;==========<ZERO COUNTER>==========
[Statedef 751]
type=A
physics=N
movetype=I
anim=751
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 750, strengthvar]
type=varset
trigger1=!time&&var(59)<=0
var(10)=ifelse((command="bdx"||command="bdy"||command="bdz"),1,2)
ignorehitpause=1

[State 750, strengthvar (AI)]
type=varset
trigger1=!time&&var(59)=1
var(10)=1
ignorehitpause=1

[State 750, snd]
type=playsnd
trigger1=time = 0
value=2,3
channel=0

[State 750, superpause]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s-1,0
p2defmul=1
darken=0

[State 3000, carga]
type=helper
trigger1=time = 0
helpertype=normal
stateno=9750
ID=9750
name="fx"
postype=p1
pos = 15,-50
ownpal=1
persistent=0
supermovetime=9999

[State 750, end]
type=changestate
trigger1=time>=20
value=ifelse(var(10)=1,1012,650)

;---------------------------------------------------------------------------
;Guard Push (Stand)
[Statedef 6300]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6300
sprpriority = 2

[State 6300, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6300, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6300, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6300, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6300, a5]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = Time = 0
anim = 25060
postype = p1
pos = 53,-50
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 54,3
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 6300, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Guard Push (Crouch)
[Statedef 6310];--------------crouch
type    = C
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6310
sprpriority = 2

[State 6310, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6310, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6310, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6310, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6310, a5]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = Time = 0
anim = 25060
postype = p1
pos = 53,-50
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6310, a7]
type = PlaySnd
trigger1 = Time = 0
value = 54,3
volume = 255
channel = 1

[State 6310, a8]
type = PlaySnd
trigger1 = Time = 0
value = 50,0
channel = 0

[State 6310, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Guard Push (Air)
[Statedef 6320];------------air
type    = S
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 6320
sprpriority = 2

[State 6320, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6320, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6320, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6320, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6320, a5]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 6350
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = Time = 0
anim = 25060
postype = p1
pos = 53,-50
ownpal = 1
vel = 2,0
ignorehitpause = 1
sprpriority = 7

[State 6320, a7]
type = PlaySnd
trigger1 = Time = 0
value = 54,3
volume = 255
channel = 1

[State 6320, a8]
type = PlaySnd
trigger1 = Time = 0
value = 50,0
channel = 0

[State 6320, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;Guard Push (Helper)
[Statedef 6350];guard push helper
type    = S
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 6350
sprpriority = -4

[State 6350, a1]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 6350, a2]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 6350, a3]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 6350, a4]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 6350, a5]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6350, a6]
type = DestroySelf
trigger1 = Time >= 18

;---------------------------------------------------------------------------
;---------------------------Tech Roll ------------------------------------
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Near Roll


;;-----------------------------
; Charge
[Statedef 950]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 950				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 820, PowerAdd]
type = PowerAdd
triggerall = Anim = 950
trigger1 = 1
value = 2* ((time+12)/12)

[State 820, Anim]
type = ChangeAnim
triggerall=var(59)<=0
;triggerall = Time >= 4
trigger1 = (Command != "chargey" || Command != "chargeb") || (power >= 3000)
value = 951
persistent = 0

[State 740, fx]
type=helper
trigger1=anim=950&&!numhelper(7240)&&animelem =2
helpertype=normal
stateno=7240
ID=7240
name="Power Charge"
postype=p1
ownpal=1
persistent=0

[State 820, StateChange]
type = ChangeState
trigger1 = anim = 951 && AnimTime = 0
value = 0
ctrl = 1

;==================================================================================
;======| RELACIONADO � AI - AI RELATED |===========================================
;==================================================================================

; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9741, PauseCheck]
type = VarSet
trigger1 = (GameTime>(Parent,var(57)))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = !var(9)
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = !(var(4):=1)
var(59) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = (var(4):=0)

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = var(1)
triggerall = !var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
var(59) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(2) = 2)
trigger8 = (var(2):=0)
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = (var(1):=1)
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)


;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick dir activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9742, PauseCheck]
type = VarSet
trigger1 = (GameTime>Parent,var(57))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)

[State 9742, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = (var(6):=0)
var(6) = 1

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(7):=0)
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = (Parent,command = "a")
trigger1 = (Partner,command = "a")
trigger2 = (Parent,command = "b")
trigger2 = (Partner,command = "b")
trigger3 = (Parent,command = "c")
trigger3 = (Partner,command = "c")
trigger4 = (Parent,command = "x")
trigger4 = (Partner,command = "x")
trigger5 = (Parent,command = "y")
trigger5 = (Partner,command = "y")
trigger6 = (Parent,command = "z")
trigger6 = (Partner,command = "z")
trigger7 = (Parent,command = "start")
trigger7 = (Partner,command = "start")
trigger8 = (var(15):=0)
var(15) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(1)
trigger1 = var(6)
trigger1 = !var(3)
trigger1 = !var(4)
trigger1 = !var(9)
var(59) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5)
trigger1 = var(7)
trigger1 = !var(2)
trigger1 = !var(15)
var(59) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = !var(8)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = (var(2) = 2)
trigger2 = (var(2):=0)
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6)
trigger2 = var(7)
trigger3 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = (var(1):=1)
var(5) = !var(7)


;------------------
; XOR Method's HitPauseTime Helper State

[StateDef 9743]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9743, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9743, HitPauseTime]
type = VarSet
trigger1 = !(Parent,HitPauseTime)
trigger2 = (GameTime>Parent,var(57))
var(1) = Parent,HitPauseTime

[State 9742, Goodbye]
type = DestroySelf
trigger1 = (Parent,var(59) = 1)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
;==================================================================================
;==================================================================================
;==================================================================================
;-------------------------------------------
; Ffffffinish!!
[StateDef 30000]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1


[State 9999, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = f30000,0
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = Time<15
time = 1
add = -100,-100,-100
color = 0

[State 8400: AllPalFX]
type = AllPalFX
trigger1 = Time<20 && time%4=0
time = 1
add = 255,255,255

[State 9999, Short Pause]
type = Pause
trigger1 = Time = 1
time = 30
movetime = 15
ignorehitpause = 1

[Quotes];English
victory1 = "Are you hurt? Maybe my Doctor can fix you..."
victory2 = "Hee hee hee... I did it! Girl power!"
victory3 = "I may be little, but I still kicked your butt!"
victory4 = "I think you're due for an upgrade!"
victory5 = "I'm sorry. I didn't mean to hurt you so badly!"
victory6 = "Now how does Mega Man do that absorption thing?"
victory7 = "Now... If only I could have my own series!"
victory8 = "Darn it, you got my dress all dirty! I can't believe it!"
victory9 = "Where... am I? I was just in the middle of cleaning the lab..."
victory10 = "I think you're due for an upgrade!"



