;---------------------------------------------------------------------------
;Hyper Attacks
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------------------------
;Hyper #1 - Machine Gun
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 4

[State 30000, 6]
type = AfterImage
trigger1 = (AnimElemTime(2)=0)
time = 9999
length = 20
palcolor = 0
paladd = 0,0,250
palbright = 0,0,100
palpostbright = 0,0,-50

[State 3000, assertspecial]
type = assertspecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
Time = 40
movetime = 40
pos = 10,-45
anim = S25100 ; new superpause
sound = s8889,0
poweradd = -1000

[State 3000, Sound]
type = PlaySnd
trigger1 = animelem=1
value = s8889,0

[State 0, Helper] ;===============NEW HYPER BG
type = Helper
trigger1 =  AnimElem = 1
helpertype = normal ;player
name ="Hyper fx"
ID = 25050
stateno = 25050
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 3000, Hyper Portrait]
type = explod
trigger1 = time = 0
anim = 1080
postype = back
sprpriority = -2
supermovetime = -1
removetime = 60
pos = 0,0
bindtime = -1
removeongethit = 1

[State 3000, Hyper Combo Finish]
type = PlaySnd
triggerall = !p2life
trigger1 = numexplod(8290) = 0
value = S9999,6
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0
persistent = 0

;----------------------------------
;Actual move section

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animelemtime(14) > 0
trigger1 = anim = 3000
trigger1 = P2Dist X < 2
value = 3001

[State 0, Turn]
type = Turn
trigger1 = anim = 3001
trigger1 = !animtime

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3001
trigger1 = !animtime
value = 3000
elem = 14

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 1 && anim = 3000
trigger2 = animelem = 3 && anim = 3000
trigger3 = animelem = 2 && anim = 3001
x = ifelse(animelemno(0) = 1, 8, 1)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S10,2
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 13
value = S13,2
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3000
trigger1 = Animelem = 15
trigger2 = anim = 3001
trigger2 = Animelem = 2
value = S18,1
channel = -1

[State 0, Explod]
type = Explod
trigger1 = anim = 3000
trigger1 = Animelem = 15
trigger2 = anim = 3001
trigger2 = Animelem = 2
anim = 3005
ID = 3005
pos = ifelse(anim = 3000, 51, 43),ifelse(anim = 3000, -49, -41)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = anim = 3000
trigger1 = Animelem = 15
trigger2 = anim = 3001
trigger2 = Animelem = 2
anim = 3005
ID = 3005
pos = ifelse(anim = 3000, -51, -43),ifelse(anim = 3000, -49, -41)
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 3408, Helper]
type = Helper
trigger1 = anim = 3000
trigger1 = Animelem = 15
trigger2 = anim = 3001
trigger2 = Animelem = 2
helpertype = normal ;player
name = "Uzi Bullet"
ID = 3050
stateno = 3050
pos = ifelse(anim = 3000, 63, 43), ifelse(anim = 3000, -45, -38)- random % 10
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 3408, Helper]
type = Helper
trigger1 = anim = 3000
trigger1 = Animelem = 15
trigger2 = anim = 3001
trigger2 = Animelem = 2
helpertype = normal ;player
name = "Uzi Bullet"
ID = 3050
stateno = 3050
pos = ifelse(anim = 3000, -63, -43), ifelse(anim = 3000, -45, -38)- random % 10
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 0

[State 3200, End]
type = ChangeState
trigger1 = Time=160
value = 3005
ctrl = 0
;----------------------------------------
[Statedef 3005]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
anim = 3002
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S18,0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S10,2
channel = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 12
trigger2 = !animtime
x = ifelse(animelemno(0) = 12, -1, -8)

[State 3200, End]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1


;--------------------------------------------------------------------------------
;Uzi Bullet
[Statedef 3050]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 12,0
anim = 3050
ctrl = 0
sprpriority = 3

[State 1350, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1350, HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
 
[State 1350, HitOverride]
type = HitOverride
trigger1 = Time <= 0
time = -1
attr = SCA, NP, SP, HP
slot = 0
stateno = 3055

[State 1350, 2]
type = HitDef
trigger1 = time = 0
attr = S, HP
damage    = ceil(20 * parent, fvar(11)), 1
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 1;, Hit
pausetime = 4, 3
sparkno = S25030+random%2
guard.sparkno = S25008
sparkxy = 0, 0
hitsound   = s8000,2
guardsound = s8500,0
getpower = 0,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 12
ground.velocity = -9,0
p1stateno = 3055
air.hittime = 12
air.velocity = -9,-0.5
fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = 4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist <= -60


;--------------------------------------------------------
;Uzi Bullet colision handler
[Statedef 3055]
type    = U
juggle  = 0
velset = 0,0
anim = 1
ctrl = 0
sprpriority = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 50


;---------------------------------------------------------------------------------------------
;Hyper #2 - Laughing Skull Satsu?
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 4

[State 30000, 6]
type = AfterImage
trigger1 = anim = 3100
trigger1 = (AnimElemTime(2)=0)
time = 9999
length = 20
palcolor = 0
paladd = 0,0,250
palbright = 0,0,100
palpostbright = 0,0,-50

[State 3000, assertspecial]
type = assertspecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
Time = 40
movetime = 40
pos = 1, -58
anim = S25100 ; new superpause
sound = s8889,0
poweradd = -1000

[State 3000, Sound]
type = PlaySnd
trigger1 = anim = 3100
trigger1 = animelem=1
value = s8889,0

[State 0, Helper] ;===============NEW HYPER BG
type = Helper
trigger1 = anim = 3100
trigger1 =  AnimElem = 1
helpertype = normal ;player
name ="Hyper fx"
ID = 25050
stateno = 25050
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 3000, Hyper Portrait]
type = explod
trigger1 = time = 0
anim = 1080
postype = back
sprpriority = -2
supermovetime = -1
removetime = 60
pos = 0,0
bindtime = -1
removeongethit = 1

[State 3000, Hyper Combo Finish]
type = PlaySnd
triggerall = !p2life
trigger1 = numexplod(8290) = 0
value = S9999,6
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0
persistent = 0

;--------------------------------------
;Actual move section
[State 1350, HitBy]
type = NotHitBy
trigger1 = anim = 3100
trigger1 = Animelemtime(5) < 0
value = SCA, AA, AP
time = 1

[State 3408, Helper]
type = Helper
trigger1 = anim = 3100
trigger1 = Animelem = 4
helpertype = normal ;player
name = "Laughing Skull"
ID = 3150
stateno = 3150
pos = 20, -41
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = .7
size.yscale = .7

[State 0, ChangeState] ; Hit
type = ChangeState
trigger1 = Numhelper(3150)
trigger1 = helper(3150), stateno = 3151
value = 3110

[State 0, Changeanim]
type = Changeanim
trigger1 = anim = 3100
trigger1 = animelemtime(5) >= 0
trigger1 = !Numhelper(3150)
value = 3101

[State 0, ChangeState] ; missed
type = ChangeState
trigger1 = anim = 3101
trigger1 = !animtime
value = 0
ctrl = 1


;---------------------------------------------------------------------------------------------
;Hyper #2 - Follow-up
[Statedef 3110]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
sprpriority = 4

[State 0, PosSet]
type = PosSet
triggerAll = Numhelper(3150)
trigger1 = Helper(3150), time = 26
x = (helper(3150), pos x) - 40 * facing
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 70
value = 3110

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = s8000, 5
channel = -1

[State 40]
type = Explod
trigger1 = !numexplod(25005)
trigger1 = animelem = 3
ID = 25005
anim = 25005+random%2
sprpriority = 2
Ownpal = 1
Pos = 48, -54
postype = P1  ;P2, Front, Back, Left, Right
removetime = -2

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3110 && !animtime
value = 0
ctrl = 1


;--------------------------------------------------------------------------------
;Laughing skull
[Statedef 3150]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 5, 0
anim = 3150
ctrl = 0
sprpriority = 2

[State 1350, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1350, HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 1
 
[State 1350, HitOverride]
type = HitOverride
trigger1 = 1
time = -1
attr = SCA, NP, SP, HP
slot = 0
stateno = 3155

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S24,0
channel = 0

[State 1350, 2]
type = HitDef
trigger1 = time = 0
ID = 3150
attr = S, HP
damage    = ceil(100 * parent, fvar(11)), 1
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 1;, Hit
pausetime = 12, 12
sparkno = S25010+random%2
guard.sparkno = S25008
sparkxy = 0, 0
hitsound   = s8000,2
guardsound = s8500,0
getpower = 0,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,0
air.hittime = 15
air.velocity = -4,-2
fall = 0; 1
fall.recover = 0
envshake.time = 7
envshake.ampl = 4

[State 1100, TargetState]
type = TargetState
triggerAll = MoveHit
triggerAll = NumTarget(3150) && !(Target, IsHelper) && (Target(3150), movetype = H) && (Target(3150), stateno != 3160)
trigger1 = (enemynear, statetype != A)
trigger2 = (enemynear, statetype = A) || (enemynear, hitfall)
value = 3160
ID = 3150

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact && Numtarget(3150)
value = 3151
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact && !Numtarget
value = 3155
ctrl = 0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist <= -60


;--------------------------------------------------------------------------------
;Tarrghet aquired, proceeding with grabbing opponent by the teeth!
[Statedef 3151]
type    = S
movetype= I
physics = N
velset = 0, 0
anim = 3151
ctrl = 0
sprpriority = 2

[State 4001, fading]
type = allpalfx
trigger1 = animelemtime(1) = 2
time = 20
sinadd = -255, -255, -255, 90

[State 4001, full dark]
type = envcolor
triggerAll = animelemtime(2) >= 0
trigger1 = parent, stateno = [3100, 3110]
trigger1 = parent, anim != 3110
time = 4
value = 0, 0, 0

[State 0, BindToTarget]
type = BindToTarget
trigger1 = time = 25
trigger1 = Target(3150), stateno = 3160
time = 1
ID = 3150
pos = 25, pos y, Foot

[State 0, HitAdd]
type = HitAdd
trigger1 = parent, anim = 3110
trigger1 = parent, animelem = 3
value = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = parent, anim = 3110
trigger1 = parent, animelem = 3
value = ceil(-30 * parent, fvar(11))
ID = 3150

[State 0, TargetState]
type = TargetState
trigger1 = parent, anim = 3110
trigger1 = parent, animelem = 3
value = 3165
ID = 3150


;--------------------------------------------------------------------------------
;Laughing skull
[Statedef 3155]
type    = S
movetype= I
physics = N
velset = 3, 0
anim = 3155
ctrl = 0
sprpriority = 2

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 0

; Stuff majorly based/taken from protoman
[State 3055, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(2)

[State 3055, AngleSet]
type = AngleSet
trigger1 = animelem = 1
value = 0

[State 3055, VarSet]
type = VarSet
trigger1 = animelem = 1
fv = 2
value = 0

[State 3055, VarAdd]
type = VarAdd
trigger1 = animelemtime(2) >= 0
fv = 2    ;fv =
value = -13
;ignorehitpause =
;persistent =

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 14

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45

[State 0, VelAdd]
type = VelAdd
trigger1 = vel x >= 0.7
x = -.1

[State 0, VelSet]
type = VelSet
trigger1 = vel x < 0.6
x = 0.7

[State 0, VelSet]
type = PosSet
trigger1 = pos y >= -14
trigger1 = vel y > 0
y = -14

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -14
trigger1 = vel y > 0
y = vel y * -1 * 0.7

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 60


;--------------------------------------------------------------------------------
;Arrgh! oh, no! Some freaky skull's bitting me! Oh no! skull man's disappearing!
[Statedef 3160]
type    = S
movetype= H
physics = N
velset = 0, 0
anim = 3160
ctrl = 0
sprpriority = 1

;Put the sucker on the ground!
[State 0, changeanim]
type = posset
trigger1 = time = 24
y = 0

;--------------------------------------------------------------------------------
;Arrgh! oh no! I'm gonna get kicked up in the air!
[Statedef 3165]
type    = A
movetype= H
physics = N
velset = 0, -8
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Selfanimexist(5051)
trigger1 = anim != 5051 && anim != 3165
value = 5051

[State 0, ChangeAnim]
type = ChangeAnim2
trigger1 = !Selfanimexist(5051)
trigger1 = anim != 5051 && anim != 3165
value = 3165

;-----------------------------------------------------------------------------
;Hyper #3 Fake invisibility
[Statedef 3400]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = S7,1

[State 1500, 3]
type = ChangeState
trigger1 = AnimTime = 0 
value = 3410
ctrl = 0

;-----------------------------------------------------
[Statedef 3410]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3404
ctrl = 0
sprpriority = 2
Poweradd= -3000

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1


[State 0, HitDef]
type = HitDef
trigger1 = Animelem = 2
attr = SCA, HP
damage    = 0,0
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3;, Hit
pausetime = 0,1
hitsound = s8250,2
sparkxy = 0,-64
;guard.sparkno = -1
guardsound = S8500,0
ground.type = Low
p2stateno = 5998
kill = 0
getpower = 0,0

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 8255
ID = 8255
pos = 15,-40
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .5,.5
sprpriority = 7
ontop = 0

[State 0, Explod]
type = Explod
trigger1 = Movehit = 1
anim = 5301
ID = 3011
pos = 6,-64
postype = p2 
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 555
pausemovetime = 0
scale = 1,1
sprpriority = 9
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1


[State 1500, 3]
type = ChangeState
trigger1 = movehit = 1
value = 3420
ctrl = 0

[State 1500, 3]
type = ChangeState
trigger1 = moveguarded = 1
value = 3480
ctrl = 0


[State 1500, 3]
type = ChangeState
trigger1 = Time = 60
value = 3480
ctrl = 0

;----------------------------------------------
;Hyper Begins
[Statedef 3420]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3405
ctrl = 0
sprpriority = 0

[State 3000, assertspecial]
type = assertspecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = NoBarDisplay
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem=1
Time = 30;200;40
pos = 0,-45
anim = S25100 ; new superpause
sound = s8889,100
;poweradd = -3000

[State 0, Helper] ;===============NEW HYPER BG
type = Helper
trigger1 =  AnimElem = 1
helpertype = normal ;player
name ="Hyper fx"
ID = 25050
stateno = 25052
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 3000, Hyper Portrait]
type = explod
trigger1 = time = 0
anim = 1080
postype = back
sprpriority = -2
supermovetime = -1
removetime = 60
pos = 0,0
bindtime = -1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = Animelem = 1
helpertype = normal ;player
name = "SkullBot"
ID = 3430
stateno = 3430
pos = -100,0 ;,0,0
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
sprpriority = 0

[State 3200, End]
type = ChangeState
trigger1 = AnimelemTime(1) >= 10 && !numhelper(3430);Time = 715
value = 3480
ctrl = 0

;-----------------------------------------------------------------------------
;Skullbot Enters
[Statedef 3430]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 3,0
anim = 3401
ctrl = 0
sprpriority = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = backedgedist < 20
x = .07

[State 0, VelSet]
type = VelSet
trigger1 = backedgedist > 20
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S6,3
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = S6,4
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 50
value = S13,1
channel = 0

[State 3203, 1]
type = Explod
trigger1 = Animelem = 1
ID = 3415
anim = 3415
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 3
supermovetime = 110
ontop = 0

[State 3203, 1]
type = Explod
trigger1 = Animelem = 1
ID = 3411
anim = 3411
pos = -80, 0
bindtime = -1
removetime = -1
sprpriority = 3
supermovetime = 110
ontop = 0

[State 1500, 3]
type = ChangeState
trigger1 = backedgedist > 20 && time >= 100
value = 3440
ctrl = 0

[State 1500, 3]
type = ChangeState
;trigger1 = parent, stateno != 3220 || parent, stateno != 3280
trigger1 = parent, movetype = H
value = 3450


;-----------------------------------------------------------------------------
;Skullbot Attacks
[Statedef 3440]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3402
ctrl = 0
sprpriority = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 25
value = S6,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 450
value = S6,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 450
value = S6,6

[State 3203, 1]
type = Explod
trigger1 = Time = 25
anim = 3406
pos = 45,-39
bindtime = -1
removetime = 200
supermovetime = 110
sprpriority = 8
ID = 3206
scale = 1.3,1.3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 150
id = 3406

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 150
time = 15
ampl = 10


[State 0, AllPalFX]
type = null;AllPalFX
trigger1 = Time = 150
time = 30
sinadd = 255,255,255,15

[State 0, Helper]
type = Helper
trigger1 = Time = 150
helpertype = normal ;player
name = "SkullBeam"
ID = 3460
stateno = 3460
pos = 43, -40
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
sprpriority = 9

[State 0, AllPalFX]
type = null;AllPalFX
trigger1 = Time = 150
trigger2 = Time = 125
trigger3 = Time = 200
;trigger4 = Time = 400
time = 75
add = 0,0,0
mul = 256,256,256
sinadd = 0,-200,0,150


[State 3203, 1]
type = Explod
trigger1 = Time = 380
anim = 3412
pos = 65,-25
bindtime = -1
removetime = 50
supermovetime = 110
sprpriority = 7
ID = 3412
scale = .5,.5

[State 1500, 3]
type = ChangeState
trigger1 = Time = 400
value = 3450
ctrl = 0

;-----------------------------------------------------------------------------
;Skullbot Leaves
[Statedef 3450]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 4,0
anim = 3403
ctrl = 0
sprpriority = -2

[State 0, Veladd]
type = VelAdd
trigger1 = 1
x = 1
y = -.3

[State 0, StopSnd]
type = StopSnd
trigger1 = Animelem = 1
channel = -1


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Animelem = 1
id = 3411

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Animelem = 1
id = 3415

[State 3203, 1]
type = Explod
trigger1 = Animelem = 1
ID = 3416
anim = 3416
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = -1
supermovetime = 110
ontop = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
value = S6,0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 5
value = S6,3
channel = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = frontedgedist < -100
id = 3416

[State 3005, DestroySelf]
type = DestroySelf
trigger1 = frontedgedist < -160

;-----------------------------------------------------------------------------
;Laser Helper
[Statedef 3460]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3407
ctrl = 0
sprpriority = 9

[State 3005, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 3203, 1]
type = Explod
trigger1 = Time%12=0
anim = 23001
pos = 10,0
bindtime = -1
removetime = -2
supermovetime = 110
sprpriority =5 
ID = 3209
postype = p1
vel = 0,0
accel =-0.25,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = S6,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 4
value = S6,5


[State 1498, BindToParent]
type = BindToParent
trigger1 = numhelper(3430)
time = 2
pos = 43, -40

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7005
ID = 7005
pos = 5,-35
postype = p2 
facing = 1
vfacing = 1
bindtime = 200
vel = 0,0
accel = 0,0
random = 0,0
removetime = 200
pausemovetime = 0
scale = .6,.6
sprpriority = 9
ontop = 1
shadow = 0,0,0
ownpal = 0
persistent = 0
;removeongethit = 1


[State 3405, 2]
type = HitDef
trigger1 = time %2=0 && time <196
attr = S, HP
damage = 8,1;10,3
animtype = Light
air.animtype = Light
guardflag = H
hitflag = MAFDP
priority = 8, Hit
pausetime = 0,1
sparkno = S25030+random%2
sparkxy = -10, -10
hitsound = s8000,5
ground.type = Low;Low
ground.slidetime = 0;15
ground.hittime  = 3;50;3
ground.velocity = 0,0;-4,-1;-15
ground.cornerpush.veloff =0
air.velocity = -1,-0.15;-4,-0.5;-8,-0.2
air.hittime = 3;50
air.cornerpush.veloff =  0
fall=1
fall.recover = 0
air.fall = 1
givepower = 6, 2
envshake.time = 10
envshake.ampl = 7
palfx.time = 100
Palfx.add = -0,-200,-0
Palfx.sinadd = 40,80,40,10
Palfx.color = 0
;Palfx.invertall = 1 
envshake.time = 10
envshake.ampl = 7
p2facing = 1
getpower = 0,0

[State 3405, 2]
type = HitDef
trigger1 = time >=196
attr = S, HP
damage = 4,1;10,3
animtype = Heavy
air.animtype = Heavy
guardflag = H
hitflag = MAFD
priority = 8, Hit
pausetime = 0,1
sparkno = S25030+random%2
sparkxy = -10, -10
hitsound = s8000,2
ground.type = High;Low
ground.slidetime = 0;15
ground.hittime  = 20;50;3
ground.velocity = -4,-13;-4,-1;-15
ground.cornerpush.veloff =0
air.velocity = -4,-13;-4,-0.5;-8,-0.2
air.hittime = 20;50
air.cornerpush.veloff =  0
fall=1
fall.recover = 0
air.fall = 1
givepower = 6, 2
palfx.time = 100
Palfx.add = -0,-200,-0
Palfx.sinadd = 40,80,40,10
Palfx.color = 0
envshake.time = 15
envshake.ampl = 7
p2facing = 1
getpower = 0,0
p2stateno = 3315




[State 3260, 2]
type = ScreenBound
trigger1 = P2MoveType = H 
trigger2 = NumTarget > 0
value = 0
movecamera = 0,0



[State 3005, DestroySelf]
type = DestroySelf
trigger1 =  numhelper(3430) = 0
trigger2 = time = 200



;----------------------------------------------------------------------------
;ENDING
[Statedef 3480]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1250
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 13
value = S7,0

[State 1060, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;--------------------------------------------------------------------------------
;Hyper #5
[Statedef 3300]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3300
ctrl = 0
sprpriority = 2

[State 30000, 6]
type = AfterImage
trigger1 = (AnimElemTime(2)=0)
time = 9999
length = 20
palcolor = 0
paladd = 0,0,250
palbright = 0,0,100
palpostbright = 0,0,-50


[State 0, PalFX]
type = PalFX
trigger1 = !Time
add = 0,0,0
mul = 256,256,256
sinadd = -155,-155,-155,600
time = 300


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S10,3

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = animelem = 6
;value = S3,0
;volumescale = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S24,0
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 100
value = S24,0
volumescale = 65

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 180
value = S24,0
volumescale = 30

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3301
stateno = 3301
pos = -80,-25
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3302
stateno = 3302
pos = -200,-100
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3304
stateno = 3304
pos = -100,-200
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3303
stateno = 3303
pos = -200,-150
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .7
size.yscale = .7

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3301
stateno = 3301
pos = -120,-125
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[State 0, Helper]
type = Helper
trigger1 = Animelem = 7
helpertype = normal ;player
name = "LaughingSkull"
ID = 3304
stateno = 3304
pos = -150,-50
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6


[State 3300, assertspecial]
type = assertspecial
trigger1 = animelem=4;3
flag = noBG
flag2 = noFG
ignorehitpause = 1

;-----------=[ Common Hyper FX ]=-----------------
[State 3000, Hyper Portrait]
type = explod
trigger1 = time = 0
anim = 1080
postype = back
sprpriority = -3
supermovetime = -1
removetime = 60
pos = 0,0
bindtime = -1
removeongethit = 1

[State 0, Helper] ;===============NEW HYPER BG
type = Helper
trigger1 =  AnimElem = 1
helpertype = normal ;player
name ="Hyper fx"
ID = 25050
stateno = 25050
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 3000, assertspecial]
type = assertspecial
trigger1 = time = [0,40]
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 0
Time = 40
pos = 0,-45
anim = S25100 ; new superpause
sound = s8889,0
poweradd = -3000
movetime = 40

[State 3000, Hyper Background]
type  = Explod
trigger1 = animelem = 1
anim = F32710
postype = left
sprpriority = -4
removetime = -1
ID = 750
pos = 0,0
scale = .5,.5
bindtime = -1
removeongethit = 1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999

[State 3000, Hyper Explode]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 4532
postype = p1
pos = 19,-80
ownpal = 1
sprpriority = 5
supermovetime = 40

[State 3000, Hyper Circle]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 4533
postype = p1
pos = 19,-80
ownpal = 1
sprpriority = 5
supermovetime = 40

[State 3100, Ground Flash]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 6666
ID = 8400
postype = P1
pos = -40,0
sprpriority = 3
ownpal = 1
supermovetime = 0

;-----------=[ FX end ]=-----------------



[State 3300, Hyper Combo Finish]
type = PlaySnd
triggerall = !p2life
trigger1 = numexplod(8290) = 0
value = S9999,6
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0
persistent = 0

[State 3100, End]
type = ChangeState
trigger1 = time = 200
value = 3305
ctrl = 1


;--------------------------------------------------------------------------------
;Skulls
[Statedef 3301]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 3301
ctrl = 0
sprpriority = 9

[State 2244, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = .15

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = 4
y = 0;1;0.8
ignorehitpause = 0


[State 3405, 2]
type = HitDef
;trigger1 = !movehit
;trigger1 = !moveguarded
trigger1 = Time = 1
attr = SCA, HP
damage    = 15,2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3;, Hit
pausetime = 0,1
;guard.sparkno = -1
sparkno = S25030+random%2
sparkxy = -20,-5
hitsound   = S8000,2
guardsound = S8500,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,0
air.velocity = -2,-1.5
fall=0
air.fall = 1
givepower = 9
envshake.time = 10
envshake.ampl = 7

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 3302
ID = 3302
pos = 20,-30
postype = p2  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 1055,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
trigger2 = movecontact = 1

;--------------------------------------------------------------------------------
;Skulls
[Statedef 3302]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 3304
ctrl = 0
sprpriority = 9


[State 2244, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = .15

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = 4
y = 0;1;0.8
ignorehitpause = 0


[State 3405, 2]
type = HitDef
;trigger1 = !movehit
;trigger1 = !moveguarded
trigger1 = Time = 1
attr = SCA, HP
damage    = 15,2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3;, Hit
pausetime = 0,1
;guard.sparkno = -1
sparkno = S25030+random%2
sparkxy = -20,-5
hitsound   = S8000,2
guardsound = S8500,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,0
air.velocity = -2,-1.5
fall=0
air.fall = 1
givepower = 9
envshake.time = 10
envshake.ampl = 7

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 3302
ID = 3302
pos = 20,-30
postype = p2  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 1055,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
trigger2 = movecontact = 1

;--------------------------------------------------------------------------------
;Skulls
[Statedef 3303]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 3306
ctrl = 0
sprpriority = 9


[State 2244, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = .15

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = 4
y = 0;1;0.8
ignorehitpause = 0


[State 3405, 2]
type = HitDef
;trigger1 = !movehit
;trigger1 = !moveguarded
trigger1 = Time = 1
attr = SCA, HP
damage    = 15,2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3;, Hit
pausetime = 0,1
;guard.sparkno = -1
sparkno = S25030+random%2
sparkxy = -20,-5
hitsound   = S8000,2
guardsound = S8500,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,0
air.velocity = -2,-1.5
fall=0
air.fall = 1
givepower = 9
envshake.time = 10
envshake.ampl = 7

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 3302
ID = 3302
pos = 20,-30
postype = p2  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 1055,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
trigger2 = movecontact = 1

;--------------------------------------------------------------------------------
;Skulls
[Statedef 3304]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 3306
ctrl = 0
sprpriority = 9


[State 2244, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = .15

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = 4
y = 0;1;0.8
ignorehitpause = 0


[State 3405, 2]
type = HitDef
;trigger1 = !movehit
;trigger1 = !moveguarded
trigger1 = Time = 1
attr = SCA, HP
damage    = 15,2
animtype = Light
guardflag = MA
hitflag = MAFDP
priority = 3;, Hit
pausetime = 0,1
;guard.sparkno = -1
sparkno = S25030+random%2
sparkxy = -20,-5
hitsound   = S8000,2
guardsound = S8500,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,0
air.velocity = -2,-1.5
fall=0
air.fall = 1
givepower = 9
envshake.time = 10
envshake.ampl = 7

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 3302
ID = 3302
pos = 20,-30
postype = p2  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 1055,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 100
trigger2 = movecontact = 1

;----------------------------------------
[Statedef 3305]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3303
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S10,3

[State 3200, End]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-----------------------------------
;Custom get hit
[Statedef 3315]
type    = A
movetype= H
physics = A
velset = -6,-15
sprpriority= 3

[State 815, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 3315

[State 816, SelfState]
type = SelfState
trigger1 = (Pos Y >= -20) ;&& (Vel Y > 0)
value = 5050
ctrl = 0

;-----------------------------------------------------------------------
;Hyper FX
[Statedef 25050]
type = S
movetype = I
physics = N
anim = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2= NoFg
flag3= NoBarDisplay
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 25050
ID = 25050
pos = 160,120
postype = back;left  ;p2,front,back,left,right
facing = root,facing
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermovetime = 0
pausemovetime = 0
scale = 0.6,0.6
sprpriority = -10
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = root, MoveType = H || root,Stateno <3000
trigger2 = root,NumHelper(8400)=1
value =  25051
ctrl = 0

;-----------------------------------------------------------------------
;Hyper FX end
[Statedef 25051]
type = S
movetype = I
physics = N
anim = 9999

[State 0, PalFXWiz]
type = AllPalFX
triggerAll = root,NumHelper(8400)=0
trigger1 = !time
time = 20
add = 255,255,255
mul = 256,256,256
sinadd = -255,-255,-255,80
invertall = 0
color = 256

[State 0, PlaySnd]
type = PlaySnd
trigger1 =!time
value = S25000,0

[state 8010]
type = modifyexplod
trigger1 = 1
id = 25050
scale = 1.0,1.0+time/-15.0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 15

;-----------------------------------------------------------------------
;Hyper FX LVL 3
[Statedef 25052]
type = S
movetype = I
physics = N
anim = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2= NoFg
flag3= NoBarDisplay
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 25051
ID = 25050
pos = 160,120
postype = back;left  ;p2,front,back,left,right
facing = root,facing
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermovetime = 0
pausemovetime = 0
scale = 0.6,0.6
sprpriority = -10
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = root, MoveType = H || root,Stateno <3000
trigger2 = root,NumHelper(8400)=1
value =  25051
ctrl = 0




